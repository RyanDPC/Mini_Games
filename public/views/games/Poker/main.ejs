<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <%- include('../../header') %>
    <div class="game-container">
        <div class="dealer-area" style="display: none;">
            <h3>Dealer's Hand:</h3>
            <div id="dealer-hand"></div>
        </div>
        <div class="community-cards-area" style="display: none;">
            <div id="community-cards" class="community-cards"></div>
        </div>
        <div class="player-area" id="player-1" style="display: none;">
            <div class="player-info">
                <h3><%= user.username %>'s Hand:</h3>
                <div id="player-hand"></div>
                <p>Your Balance: <span id="player-balance" data-user-id="<%= user.id %>" data-tokens="<%= user.tokens %>"><%= user.tokens %></span></p>
                <div class="player-chips" id="player-chips-<%= user.id %>">
                    <img src="/images/chips.png" alt="Player Chips" class="chips-image">
                    <p>Chips: <span><%= user.tokens %></span></p>
                </div>
            </div>
        </div>
        <div class="players-area">
            <% for (let i = 0; i < game.players.length; i++) { %>
                <% if (game.players[i].id !== user.id) { %>
                    <div class="opponent-area" id="player-<%= i + 1 %>" style="display: none;">
                        <div class="player-info">
                            <h3><%= game.players[i].username %>'s Hand:</h3>
                            <div id="opponent-<%= i + 1 %>-hand"></div>
                            <p>Balance: <%= game.players[i].balance %></p>
                            <div class="player-chips" id="player-chips-<%= game.players[i].id %>">
                                <img src="/images/chips.png" alt="Player Chips" class="chips-image">
                                <p>Chips: <span><%= game.players[i].balance %></span></p>
                            </div>
                        </div>
                    </div>
                <% } %>
            <% } %>
        </div>        
        <div class="action-buttons">
            <button id="bet-button">Bet</button>
            <button id="fold-button">Fold</button>
            <button id="call-button">Call</button>
            <button id="check-button">Check</button>
            <button id="raise-button">Raise</button>
            <button id="all-in-button">All In</button>
            <input type="number" id="bet-amount" min="10" value="10" />
            <button id="help-button">Help</button>
            <button id="rules-button">Game Rules</button>
        </div>
        <div class="current-bet-area">
            <p>Current Bet: <span id="current-bet">0</span> tokens</p>
        </div>
        <div class="action-history">
            <h3>Action History</h3>
            <div id="history-log"></div>
        </div>
        <div class="current-turn">
            <p>Current Turn: <span id="current-player"></span></p>
        </div>
        <div class="notifications-area" id="notifications-area"></div>
        <div class="results-area" id="results-area" style="display: none;">
            <h3>Results:</h3>
            <div id="results-log"></div>
        </div>
        <div class="spectator-info" id="spectator-info" style="display: none;">
            <h3>You're in Spectator Mode</h3>
            <p>Watch the game unfold in real-time.</p>
        </div>
    </div>
    <div id="help-popup" class="help-popup" style="display: none;">
        <div class="help-content">
            <span id="close-help" class="close-help">&times;</span>
            <img src="/images/poker_combos.png" alt="Poker Combos">
        </div>
    </div>
    <div id="rules-popup" class="rules-popup" style="display: none;">
        <div class="rules-content">
            <span id="close-rules" class="close-rules">&times;</span>
            <h3>Poker Game Rules</h3>
            <p>Some detailed rules about how to play poker...</p>
        </div>
    </div>
    <script src="/views/games/Poker/game.js"></script>
</body>
</html>
